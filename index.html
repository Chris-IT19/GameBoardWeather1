<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Typhoon Tracker - A Science Game</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="styles.css" />
    <script type="module" src="script.js"></script>
  </head>
  <body>
    <div class="game-container">
      <header class="game-header">
        <h1>TYPHOON TRACKER</h1>
        <p class="subtitle">A Science Game - Survive and Manage the Typhoon</p>
      </header>

      <div class="game-info">
        <div class="info-panel">
          <div class="score-display">
            <span class="label">Score:</span>
            <span id="score">0</span>
          </div>
          <div class="position-display">
            <span class="label">Position:</span>
            <span id="position">0</span>
          </div>
        </div>
        <div class="controls">
          <button id="rollDice" class="btn-primary">Roll Dice</button>
          <div class="dice-result" id="diceResult"></div>
        </div>
      </div>

      <div class="board-container">
        <svg id="gameBoard" viewBox="0 0 1200 800">
          <defs>
            <linearGradient id="oceanGradient" x1="0%" y1="0%" x2="0%" y2="100%">
              <stop offset="0%" style="stop-color:#4A90E2;stop-opacity:1" />
              <stop offset="100%" style="stop-color:#1E3A5F;stop-opacity:1" />
            </linearGradient>
            <filter id="glow">
              <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
              <feMerge>
                <feMergeNode in="coloredBlur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>

          <!-- Background -->
          <rect width="1200" height="800" fill="url(#oceanGradient)"/>

          <!-- Decorative waves -->
          <path d="M 0 400 Q 150 380, 300 400 T 600 400 T 900 400 T 1200 400"
                stroke="#2E5C8A" stroke-width="2" fill="none" opacity="0.3"/>
          <path d="M 0 450 Q 150 430, 300 450 T 600 450 T 900 450 T 1200 450"
                stroke="#2E5C8A" stroke-width="2" fill="none" opacity="0.3"/>

          <!-- Game path will be drawn by JavaScript -->
          <g id="gamePath"></g>

          <!-- Player token will be positioned by JavaScript -->
          <g id="playerToken">
            <circle r="15" fill="#FFD700" stroke="#FF6B00" stroke-width="2"/>
            <text text-anchor="middle" dy="5" fill="#000" font-weight="bold" font-size="16">P</text>
          </g>
        </svg>
      </div>

      <!-- Challenge Modal -->
      <div id="challengeModal" class="modal">
        <div class="modal-content">
          <div class="modal-header">
            <h2 id="challengeTitle">Challenge</h2>
            <button class="close-btn" id="closeModal">&times;</button>
          </div>
          <div class="modal-body" id="challengeBody">
            <!-- Challenge content will be inserted here -->
          </div>
          <div class="modal-footer" id="challengeFooter">
            <!-- Buttons will be inserted here -->
          </div>
        </div>
      </div>

      <!-- Win Modal -->
      <div id="winModal" class="modal">
        <div class="modal-content win-content">
          <div class="modal-header">
            <h2>Safe Zone Reached!</h2>
          </div>
          <div class="modal-body">
            <p>Congratulations! You've successfully navigated through the typhoon and reached the Safe Zone!</p>
            <div class="final-score">
              <span class="label">Final Score:</span>
              <span id="finalScore">0</span>
            </div>
            <div class="reflection-section">
              <h3>Reflection Phase</h3>
              <p>Summarize what you've learned about typhoon concepts:</p>
              <textarea id="reflectionText" rows="5" placeholder="Enter your thoughts on typhoon formation, safety measures, and community preparedness..."></textarea>
            </div>
          </div>
          <div class="modal-footer">
            <button id="playAgain" class="btn-primary">Play Again</button>
          </div>
        </div>
      </div>

      <div class="instructions">
        <h3>How to Play</h3>
        <ul>
          <li>Click "Roll Dice" to move along the board</li>
          <li>Complete challenges on Challenge Tiles to earn points</li>
          <li>Incorrect answers may result in losing a turn or moving back</li>
          <li>Reach the Safe Zone to win and complete your reflection</li>
        </ul>
      </div>
    </div>
  </body>
</html>
